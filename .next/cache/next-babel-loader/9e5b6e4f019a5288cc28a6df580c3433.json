{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/gregleeper/premier-alfalfa/premier_alfalfa/pages/vendors/bulk-create.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { CSVReader, readString } from \"react-papaparse\";\nimport Layout from \"../../components/layout\";\nimport { useRef, useState, useEffect } from \"react\";\n\nvar BulkCreateVendors = function BulkCreateVendors() {\n  _s();\n\n  var buttonRef = useRef();\n\n  var _useState = useState([]),\n      dataArray = _useState[0],\n      setDataArray = _useState[1];\n\n  var handleOpenDialog = function handleOpenDialog(e) {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.open(e);\n    }\n  };\n\n  var handleOnFileLoad = function handleOnFileLoad(data) {\n    var length = data.length;\n    var myArray = [];\n    data.map(function (vendor) {\n      return myArray.push(vendor.data);\n    });\n    myArray.map(function (i) {\n      return findNonStringKeys(i);\n    });\n    setDataArray(myArray);\n  };\n\n  var removeQuotes = function removeQuotes(value) {\n    var myValue = value.slice(1, -1);\n    console.log(myValue);\n  };\n\n  var findNonStringKeys = function findNonStringKeys(obj) {\n    var nonStringKeys = [\"prepayment\", \"prepaymentAmt\"];\n    Object.keys(obj).forEach(function (key) {\n      if (key === nonStringKeys[0] || key === nonStringKeys[1]) {\n        removeQuotes(obj[key]);\n      }\n    });\n  };\n\n  console.log(dataArray);\n\n  var handleOnError = function handleOnError(err, file, inputElem, reason) {\n    console.log(err);\n  };\n\n  var handleOnRemoveFile = function handleOnRemoveFile(data) {\n    console.log(data);\n  };\n\n  var handleRemoveFile = function handleRemoveFile(e) {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.removeFile(e);\n    }\n  };\n\n  var replaceEmptyStringWithNull = function replaceEmptyStringWithNull(x) {\n    Object.values(x) === \"\" ? null : x;\n    console.log(x);\n  };\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center w-1/2 mx-auto py-6 text-2xl font-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, \"Bulk Upload Vendors\")), __jsx(\"div\", {\n    className: \"py-12 px-24 mx-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(CSVReader, {\n    ref: buttonRef,\n    onFileLoad: function onFileLoad(data) {\n      return handleOnFileLoad(data);\n    },\n    onError: function onError(err) {\n      return handleOnError(err);\n    },\n    noClick: true,\n    noDrag: true,\n    config: {\n      header: true\n    },\n    onRemoveFile: function onRemoveFile(data) {\n      return handleOnRemoveFile(data);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, function (_ref) {\n    var file = _ref.file;\n    return __jsx(\"div\", {\n      className: \"w-1/2 flex justify-items-center items-center h-12 mx-auto\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 15\n      }\n    }, __jsx(\"button\", {\n      className: \"w-3/12 border border-gray-900 h-full\",\n      type: \"button\",\n      onClick: function onClick(e) {\n        return handleOpenDialog(e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"Browe file\"), __jsx(\"div\", {\n      className: \"w-8/12 h-full border border-gray-300 text-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, file && file.name)), __jsx(\"button\", {\n      className: \"w-3/12 h-full border border-red-800\",\n      onClick: function onClick(data) {\n        return handleRemoveFile(data);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, \"Remove\"));\n  })), __jsx(\"div\", {\n    className: \"w-1/2 mx-auto text-2xl text-gray-900 text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, dataArray.length > 0 ? \"Number of items in file: \".concat(dataArray.length) : \"Please upload csv file\"))));\n};\n\n_s(BulkCreateVendors, \"yd2447XbuR4+DVFL5313PC0yFeA=\");\n\n_c = BulkCreateVendors;\nexport default BulkCreateVendors;\n\nvar _c;\n\n$RefreshReg$(_c, \"BulkCreateVendors\");","map":{"version":3,"sources":["/Users/gregleeper/premier-alfalfa/premier_alfalfa/pages/vendors/bulk-create.js"],"names":["CSVReader","readString","Layout","useRef","useState","useEffect","BulkCreateVendors","buttonRef","dataArray","setDataArray","handleOpenDialog","e","current","open","handleOnFileLoad","data","length","myArray","map","vendor","push","i","findNonStringKeys","removeQuotes","value","myValue","slice","console","log","obj","nonStringKeys","Object","keys","forEach","key","handleOnError","err","file","inputElem","reason","handleOnRemoveFile","handleRemoveFile","removeFile","replaceEmptyStringWithNull","x","values","header","name"],"mappings":"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","sourcesContent":["import { CSVReader, readString } from \"react-papaparse\";\nimport Layout from \"../../components/layout\";\nimport { useRef, useState, useEffect } from \"react\";\n\nconst BulkCreateVendors = () => {\n  const buttonRef = useRef();\n  const [dataArray, setDataArray] = useState([]);\n\n  const handleOpenDialog = (e) => {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.open(e);\n    }\n  };\n\n  const handleOnFileLoad = (data) => {\n    const length = data.length;\n    let myArray = [];\n    data.map((vendor) => myArray.push(vendor.data));\n    myArray.map((i) => findNonStringKeys(i));\n    setDataArray(myArray);\n  };\n\n  const removeQuotes = (value) => {\n    const myValue = value.slice(1, -1);\n    console.log(myValue);\n  };\n\n  const findNonStringKeys = (obj) => {\n    const nonStringKeys = [\"prepayment\", \"prepaymentAmt\"];\n    Object.keys(obj).forEach((key) => {\n      if (key === nonStringKeys[0] || key === nonStringKeys[1]) {\n        removeQuotes(obj[key]);\n      }\n    });\n  };\n\n  console.log(dataArray);\n\n  const handleOnError = (err, file, inputElem, reason) => {\n    console.log(err);\n  };\n\n  const handleOnRemoveFile = (data) => {\n    console.log(data);\n  };\n\n  const handleRemoveFile = (e) => {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.removeFile(e);\n    }\n  };\n\n  const replaceEmptyStringWithNull = (x) => {\n    Object.values(x) === \"\" ? null : x;\n    console.log(x);\n  };\n  return (\n    <Layout>\n      <div>\n        <div className=\"text-center w-1/2 mx-auto py-6 text-2xl font-bold\">\n          <h3>Bulk Upload Vendors</h3>\n        </div>\n        <div className=\"py-12 px-24 mx-auto\">\n          <CSVReader\n            ref={buttonRef}\n            onFileLoad={(data) => handleOnFileLoad(data)}\n            onError={(err) => handleOnError(err)}\n            noClick\n            noDrag\n            config={{ header: true }}\n            onRemoveFile={(data) => handleOnRemoveFile(data)}\n          >\n            {({ file }) => (\n              <div className=\"w-1/2 flex justify-items-center items-center h-12 mx-auto\">\n                <button\n                  className=\"w-3/12 border border-gray-900 h-full\"\n                  type=\"button\"\n                  onClick={(e) => handleOpenDialog(e)}\n                >\n                  Browe file\n                </button>\n                <div className=\"w-8/12 h-full border border-gray-300 text-center\">\n                  <span>{file && file.name}</span>\n                </div>\n                <button\n                  className=\"w-3/12 h-full border border-red-800\"\n                  onClick={(data) => handleRemoveFile(data)}\n                >\n                  Remove\n                </button>\n              </div>\n            )}\n          </CSVReader>\n        </div>\n        <div className=\"w-1/2 mx-auto text-2xl text-gray-900 text-center\">\n          <p>\n            {dataArray.length > 0\n              ? `Number of items in file: ${dataArray.length}`\n              : \"Please upload csv file\"}\n          </p>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default BulkCreateVendors;\n"]},"metadata":{},"sourceType":"module"}