{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/gregleeper/premier-alfalfa/premier_alfalfa/pages/contracts/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../../components/layout\";\nimport { useMemo, useEffect, useState } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { listContracts } from \"../../../src/graphql/queries.ts\";\nimport Link from \"next/link\";\nimport Table from \"../../components/table\";\nimport moment from \"moment\";\nimport { formatMoney } from \"../../utils\";\n\nvar Contracts = function Contracts() {\n  _s();\n\n  var _useState = useState([]),\n      contracts = _useState[0],\n      setContracts = _useState[1];\n\n  useEffect(function () {\n    getAllContracts();\n  }, []);\n\n  var getAllContracts = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _contracts$data;\n\n      var contracts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return API.graphql({\n                query: listContracts\n              });\n\n            case 2:\n              contracts = _context.sent;\n              setContracts((_contracts$data = contracts.data) === null || _contracts$data === void 0 ? void 0 : _contracts$data.listContracts.items);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getAllContracts() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var columns = useMemo(function () {\n    return [{\n      Header: \"Contract #\",\n      accessor: \"contractNumber\"\n    }, {\n      Header: \"Contract Type\",\n      accessor: \"contractType\"\n    }, {\n      Header: \"Vendor\",\n      accessor: \"contractTo.companyListingName\"\n    }, {\n      Header: \"Commodity\",\n      accessor: \"commodity.name\"\n    }, {\n      Header: \"Begin Date\",\n      accessor: \"beginDate\",\n      Cell: function Cell(_ref2) {\n        var value = _ref2.value;\n        return __jsx(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 11\n          }\n        }, moment(value).format(\"MMM Do, YYYY\"));\n      }\n    }, {\n      Header: \"End Date\",\n      accessor: \"endDate\",\n      Cell: function Cell(_ref3) {\n        var value = _ref3.value;\n        return __jsx(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 11\n          }\n        }, moment(value).format(\"MMM Do, YYYY\"));\n      }\n    }, {\n      Header: \"Quantity\",\n      accessor: \"quantity\"\n    }, {\n      Header: \"Price\",\n      accessor: \"price\",\n      Cell: function Cell(_ref4) {\n        var value = _ref4.value;\n        return __jsx(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 30\n          }\n        }, formatMoney.format(value));\n      }\n    }, {\n      Header: \"Contract Value\",\n      accessor: \"\",\n      Cell: function Cell(row) {\n        return __jsx(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 11\n          }\n        }, formatMoeny(row.row.values.quantity * row.row.values.price));\n      }\n    }, {\n      Header: \"Edit\",\n      accessor: \"id\",\n      Cell: function Cell(_ref5) {\n        var value = _ref5.value;\n        return __jsx(Link, {\n          href: \"/contracts/edit/[id]\",\n          as: \"/contracts/edit/\".concat(value),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }\n        }, __jsx(\"a\", {\n          className: \"text-blue-600 underline hover:text-blue-800 hover:no-underline\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }\n        }, \" \", \"View\"));\n      }\n    }];\n  }, []);\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"px-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"text-center w-1/2 mx-auto py-6 text-2xl font-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Contracts\")), __jsx(\"div\", {\n    className: \"my-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: \"/contracts/create\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Create New\"))), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, __jsx(Table, {\n    data: contracts,\n    columns: columns,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(Contracts, \"nMQ3dbluFzZRk7i6jJIcye6CgYk=\");\n\n_c = Contracts;\nexport default Contracts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Contracts\");","map":{"version":3,"sources":["/Users/gregleeper/premier-alfalfa/premier_alfalfa/pages/contracts/index.js"],"names":["Layout","useMemo","useEffect","useState","API","listContracts","Link","Table","moment","formatMoney","Contracts","contracts","setContracts","getAllContracts","graphql","query","data","items","columns","Header","accessor","Cell","value","format","row","formatMoeny","values","quantity","price"],"mappings":"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","sourcesContent":["import Layout from \"../../components/layout\";\nimport { useMemo, useEffect, useState } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { listContracts } from \"../../../src/graphql/queries.ts\";\nimport Link from \"next/link\";\nimport Table from \"../../components/table\";\nimport moment from \"moment\";\nimport { formatMoney } from \"../../utils\";\n\nconst Contracts = () => {\n  const [contracts, setContracts] = useState([]);\n\n  useEffect(() => {\n    getAllContracts();\n  }, []);\n\n  const getAllContracts = async () => {\n    const contracts = await API.graphql({\n      query: listContracts,\n    });\n\n    setContracts(contracts.data?.listContracts.items);\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Contract #\",\n        accessor: \"contractNumber\",\n      },\n      {\n        Header: \"Contract Type\",\n        accessor: \"contractType\",\n      },\n      {\n        Header: \"Vendor\",\n        accessor: \"contractTo.companyListingName\",\n      },\n      {\n        Header: \"Commodity\",\n        accessor: \"commodity.name\",\n      },\n      {\n        Header: \"Begin Date\",\n        accessor: \"beginDate\",\n        Cell: ({ value }) => (\n          <span>{moment(value).format(\"MMM Do, YYYY\")}</span>\n        ),\n      },\n      {\n        Header: \"End Date\",\n        accessor: \"endDate\",\n        Cell: ({ value }) => (\n          <span>{moment(value).format(\"MMM Do, YYYY\")}</span>\n        ),\n      },\n      {\n        Header: \"Quantity\",\n        accessor: \"quantity\",\n      },\n      {\n        Header: \"Price\",\n        accessor: \"price\",\n        Cell: ({ value }) => <span>{formatMoney.format(value)}</span>,\n      },\n      {\n        Header: \"Contract Value\",\n        accessor: \"\",\n        Cell: (row) => (\n          <span>\n            {formatMoeny(row.row.values.quantity * row.row.values.price)}\n          </span>\n        ),\n      },\n\n      {\n        Header: \"Edit\",\n        accessor: \"id\",\n        Cell: ({ value }) => (\n          <Link href=\"/contracts/edit/[id]\" as={`/contracts/edit/${value}`}>\n            <a className=\"text-blue-600 underline hover:text-blue-800 hover:no-underline\">\n              {\" \"}\n              View\n            </a>\n          </Link>\n        ),\n      },\n    ],\n    []\n  );\n\n  return (\n    <Layout>\n      <div className=\"px-6\">\n        <div className=\"text-center w-1/2 mx-auto py-6 text-2xl font-bold\">\n          <h3>Contracts</h3>\n        </div>\n        <div className=\"my-6\">\n          <Link href=\"/contracts/create\">\n            <a className=\"px-3 py-2 border border-gray-800 shadow hover:bg-gray-800 hover:text-white\">\n              Create New\n            </a>\n          </Link>\n        </div>\n        <div>\n          <Table data={contracts} columns={columns} />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Contracts;\n"]},"metadata":{},"sourceType":"module"}